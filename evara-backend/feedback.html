<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>GiftWise. </title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link href="assets/css/main.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="index.html" class="brand-wrap">
                <img src="assets/imgs/theme/logo.png" class="logo" alt="GiftWise. ">
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i> </button>
            </div>
        </div>
        <nav id="nav"></nav>
    </aside>
    <main class="main-wrap">
        <header id="headertop"></header>
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Feedback</h2>
                </div>
            </div>
            <div class="card mb-4">
                <header class="card-header">
                    <div class="row gx-3">
                    </div>
                </header>
                <!-- card-header end// -->
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    
                                    <th>#ID</th>
                                    <th>Email</th>
                                    <th>Name</th>
                                    <th>Feedback</th>
                                    <th>Contact Number</th>
                                </tr>
                            </thead>
                            <tbody id="appendFeedback">
                                
                            </tbody>
                        </table>
                    </div> <!-- table-responsive//end -->
                </div>
                <!-- card-body end// -->
            </div>
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script>
                   
                    </script> 
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-end">
                       
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendors/select2.min.js"></script>
    <script src="assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
       <script src="assets/js/main.js" type="text/javascript"></script>

    <script type="text/javascript" src="./nav.js"></script>
    <script type="text/javascript" src="./app.js"></script>


    <script>

    function getAllFeedback() {
        $.ajax({
            type: 'GET',
            url: 'http://localhost:3004/api/account/user/feedback',
            contentType: 'application/json',
            success: function (response) {
                if (response.status !== 200) {
                    console.log(response)
                } else {
                        //                     UF.idFeedback AS "idFeedback"
                        // U.emailId AS "emailId",
                        // C.firstName AS "firstName",
                        // C.lastName AS "lastName",
                        // message AS "message", 
                        // rating AS "rating" FROM UserFeedback UF
                    response.payload.forEach(element => {
                        $('#appendFeedback').append(`<tr>
        
                            <td>${element.idFeedback}</td>
                            <td>${element.firstName} ${element.lastName}</td>
                            <td>${element.message}</td>
                            <td>
                                <ul class="rating-stars">
                                    <li style="width: ${element.rating*20}%;" class="stars-active">
                                        <img src="assets/imgs/icons/stars-active.svg" alt="stars" />
                                    </li>
                                    <li>
                                        <img src="assets/imgs/icons/starts-disable.svg" alt="stars" />
                                    </li>
                                </ul>
                            </td>
                            <td>${element.phoneNumber}</td>
                        </tr>`)
                    });
                   
                }
            },
            error: function (error) {
            }
        });
    }

    getAllFeedback()
</script>
</body>

</html>